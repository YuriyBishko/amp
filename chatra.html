<!-- Chatra {literal} -->
<script>
function getQueryVariable(variable) {
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i=0;i<vars.length;i++) {
		var pair = vars[i].split("=");
		if(pair[0] == variable){return pair[1];}
	}
	return(false);
}
var chatid = getQueryVariable("id");
    (function(d, w, c) {
        w.ChatraID = chatid;
        var s = d.createElement('script');
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        s.async = true;
        s.src = (d.location.protocol === 'https:' ? 'https:': 'http:')
        + '//call.chatra.io/chatra.js';
        if (d.head) d.head.appendChild(s);
    })(document, window, 'Chatra');
</script>

<!-- /Chatra {/literal} -->
<div id="box"> BOXDIV</div>
<!-- amp-iframe resize -->
<script>
(function (d, w) {
  var BORDER_WIDTH = 2;
  var sizes = [200, 300];
  var currentSize = 0;
  postSize(sizes[currentSize]);

  d.getElementById('main').onclick = function(event) {
    postSize(sizes[currentSize]);
  }

  function postSize(size) {
    console.log('post new embed-size: ' + size + 'x' + size);
    d.getElementById('size').innerHTML = size + 'x' + size;
    var box = d.getElementById('box');
    box.style.width = size - BORDER_WIDTH + 'px';
    box.style.height = size - BORDER_WIDTH + 'px';
    currentSize = (currentSize + 1) % sizes.length;

    w.parent.postMessage({
      sentinel: 'amp',
      type: 'embed-size',
      height: size,
      width: size
    }, '*');

  }
})(document, window);
</script>
  
